(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),o=t.n(r),c=t(2),l=t(3),i=t.n(l),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return i.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},h=(t(36),function(e){var n=e.handleRemove,t=e.person;return u.a.createElement("button",{onClick:function(){n(t)}},"delete")}),v=function(e){var n=e.person,t=e.handleRemove;return u.a.createElement("p",null,n.name," ",n.number," ",u.a.createElement(h,{key:n.id,person:n,handleRemove:t}))},E=function(e){var n=e.onSubmit,t=e.name,a=e.number;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"name: ",u.a.createElement("input",{value:t.value,onChange:t.onChange})),u.a.createElement("div",null,"number: ",u.a.createElement("input",{value:a.value,onChange:a.onChange})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))},p=function(e){var n=e.newFilter,t=e.onChange;return u.a.createElement("div",null,"filter ",u.a.createElement("input",{value:n,onChange:t}))},g=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"getMessage"},n)},w=function(e){var n=e.errorMessage;return null===n?null:u.a.createElement("div",{className:"getErrorMessage"},n)},j=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],m=l[1],h=Object(a.useState)(""),j=Object(c.a)(h,2),O=j[0],C=j[1],S=Object(a.useState)(""),y=Object(c.a)(S,2),k=y[0],M=y[1],R=Object(a.useState)(null),T=Object(c.a)(R,2),N=T[0],D=T[1],F=Object(a.useState)(null),J=Object(c.a)(F,2),L=J[0],x=J[1];Object(a.useEffect)((function(){s().then((function(e){r(e)}))}),[]);var B=function(e){!function(e){window.confirm("Delete ".concat(e.name,"?"))&&d(e.id).then((function(){D("".concat(e.name," will be removed in few seconds")),setTimeout((function(){window.location.reload()}),3e3)}))}(e)},I=""===k?t:t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(g,{message:N}),u.a.createElement(w,{errorMessage:L}),u.a.createElement(p,{value:k,onChange:function(e){M(e.target.value)}}),u.a.createElement("h2",null,"add a new"),u.a.createElement(E,{onSubmit:function(e){e.preventDefault();var n={name:i,number:O};if(n.number.length<1|n.name.length<1)alert("Fill both name and number");else if(t.map((function(e){return e.name})).includes(n.name)){var a=t.find((function(e){return e.name===n.name}));a.number=n.number,window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))&&b(a).then((function(){r(t),m(""),C(""),D("you update ".concat(a.name," to ").concat(a.number)),setTimeout((function(){D(null)}),3e3)})).catch((function(e){x("".concat(a.name," was already removed")),setTimeout((function(){window.location.reload()}),3e3)}))}else f(n).then((function(e){r(t.concat(e)),m(""),C(""),D("you added ".concat(n.name)),setTimeout((function(){D(null)}),3e3)}))},name:{value:i,onChange:function(e){m(e.target.value)}},number:{value:O,onChange:function(e){C(e.target.value)}}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement("ul",null,I.map((function(e){return u.a.createElement(v,{key:e.name,person:e,handleRemove:B})}))))};o.a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e09fcab3.chunk.js.map